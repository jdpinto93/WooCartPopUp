jQuery(document).ready(function(o){var t,e=0;o(document.body).trigger("wc_fragment_refresh"),o(document.body).on("wc_fragment_refresh",r);var a=null;function c(t,e){o(".jp-cp-notice").html(e).attr("class","jp-cp-notice").addClass("jp-cp-nt-"+t),o(".jp-cp-notice-box").fadeIn("fast"),clearTimeout(a);var a=setTimeout(function(){o(".jp-cp-notice-box").fadeOut("slow")},3e3)}function n(){o(".jp-cp-opac").show(),o(".jp-cp-modal").addClass("jp-cp-active"),o("body").addClass("jp-cp-popup-active")}function r(){o(".jp-cp-outer").show()}function s(){o(".jp-cp-outer").hide()}function i(t){var e=t.fragments,a=t.cart_hash;if(o.each(t.fragments,function(t,e){o(t).replaceWith(e),o(t).stop(!0).css("opacity","1").unblock()}),wc_cart_fragments_params){var c=wc_cart_fragments_params.ajax_url.toString()+"-wc_cart_hash";sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(e)),localStorage.setItem(c,a),sessionStorage.setItem(c,a)}o(document.body).trigger("wc_fragments_loaded")}function p(t,e){o(document.body).trigger("adding_to_cart",[t,e]),o.ajax({url:jp_cp_localize.wc_ajax_url.toString().replace("%%endpoint%%","jp_cp_add_to_cart"),type:"POST",data:o.param(e),success:function(e){o(".jp-cp-adding",t).remove(),e.fragments?(o(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,t]),t.append('<span class="jp-cp-icon-check jp-cp-added"></span>')):e.error?(c("error",e.error),n()):console.log(e),jp_cp_localize.reset_cart&&function(t){o(".jp-cp-added",t).remove();var e=t.parents("form.cart").find(".qty");e.length>0&&e.val(e.attr("min")||1),o(".added_to_cart").remove()}(t)}})}function l(t,e){r(),o.ajax({url:jp_cp_localize.wc_ajax_url.toString().replace("%%endpoint%%","jp_cp_update_cart"),type:"POST",data:{cart_key:t,new_qty:e},success:function(o){o.fragments?i(o):c("error",o.error),s()}})}o(document.body).on("wc_fragments_refreshed wc_fragments_loaded",function(){s(),o(".jp-cp-atcn").show(),clearTimeout(a),a=setTimeout(function(){o(".jp-cp-atcn").slideUp("slow")},2500)}),o(".jp-cp-container-scroll").mCustomScrollbar({scrollEasing:"linear",theme:jp_cp_localize.sbtheme,mouseWheel:{scrollAmount:500}}),o("body").on("click",".jp-cp-basket , .jp-cp-sc-cont",function(){e||n()}),o(document.body).on("added_to_cart",function(t,e,a,c){var r=o(".jp-cp-basket");if(c&&0===c.parents(".jp-cp-rel-prods").length){if(0!==c.parents("form.cart").length)var s=o(".attachment-shop_single");else s=c.parents(".product");if(s.length>0&&r.length>0)var i=s.clone().offset({top:s.offset().top,left:s.offset().left}).css({opacity:"0.7",position:"absolute",height:"150px",width:"150px","z-index":"1000000"}).appendTo(o("body")).animate({top:r.offset().top+10,left:r.offset().left+30,width:55,height:55},{duration:500,complete:function(){i.remove(),n()}});else n()}else n()}),o(document).on("click",".jp-cp-close , .jp-cp-modal",function(t){o.each(t.target.classList,function(t,e){"jp-cp-close"!=e&&"jp-cp-modal"!=e||(o(".jp-cp-opac").hide(),o(".jp-cp-modal").removeClass("jp-cp-active"),o("body").removeClass("jp-cp-popup-active"))})}),o(document).on("submit","form.cart",function(t){t.preventDefault();var e=o(this),a=e.find('button[type="submit"]');o(".jp-cp-added",a).remove(),a.append('<span class="jp-cp-icon-spinner jp-cp-adding" aria-hidden="true"></span>');var c=e.serializeArray();a.attr("name")&&"add-to-cart"==a.attr("name")&&a.attr("value")&&c.push({name:"add-to-cart",value:a.attr("value")}),c.push({name:"action",value:"jp_cp_add_to_cart"}),p(a,c)}),o(document).on("focusin",".jp-cp-qty",function(){t=o(this).val()}),o(document).on("change",".jp-cp-qty",function(e){var a=o(this),c=parseFloat(o(this).val()),n=parseFloat(o(this).attr("step")),r=parseFloat(o(this).attr("min")),s=parseFloat(o(this).attr("max")),i=!1;if(0!==c){if(isNaN(c)||c<0)i=!0;else if(c>s&&s>0)alert("Maximum Quantity: "+s),i=!0;else if(c<r)i=!0;else if(c%n!=0)alert("Quantity can only be purchased in multiple of "+n),i=!0;else{l(o(this).parents("tr").data("jp_cp_key"),c)}!0===i&&o(this).val(t)}else a.parents(".jp-cp-pdetails").find(".jp-cp-remove-pd").trigger("click")}),o(document).on("click",".xcp-chng",function(){var t=o(this),e=t.siblings(".jp-cp-qty");e.trigger("focusin");var a=parseFloat(e.val()),c=parseFloat(e.attr("step")),n=parseFloat(e.attr("min")),r=parseFloat(e.attr("max"));if(t.hasClass("xcp-plus")){if((s=a+c)>r&&r>0)return void alert("Maximum Quantity: "+r)}else if(t.hasClass("xcp-minus")){var s;if(0===(s=a-c))return void t.parents(".jp-cp-pdetails").find(".jp-cp-remove .xcp-icon").trigger("click");if(s<n)return;if(a<0)return void alert("Invalid")}l(o(this).parents("tr").data("jp_cp_key"),s)}),o(document).on("click",".jp-cp-remove-pd",function(t){t.preventDefault(),l(o(this).parents("tr").data("jp_cp_key"),0)}),jp_cp_localize.drag_basket&&o(".jp-cp-basket").mousedown(function(t){var a=t.timeStamp;function c(t){var e=my_dragging.offset0.left+(t.pageX-my_dragging.pageX0),a=my_dragging.offset0.top+(t.pageY-my_dragging.pageY0);o(my_dragging.elem).offset({top:a,left:e})}window.my_dragging={},my_dragging.pageX0=t.pageX,my_dragging.pageY0=t.pageY,my_dragging.elem=this,my_dragging.offset0=o(this).offset(),o("body").on("mouseup",function t(n){var r=n.timeStamp;e=r-a>200?1:0,o("body").off("mousemove",c).off("mouseup",t)}).on("mousemove",c)}),o(document).on("click",".jp-cp-undo",function(){r();var t=o(this).data("jp_ckey");t&&o.ajax({url:jp_cp_localize.wc_ajax_url.toString().replace("%%endpoint%%","jp_cp_undo_item"),type:"POST",data:{cart_key:t},success:function(t){t.fragments?o(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash]):t.error?c("error",t.error):console.log(t),s()}})}),o(document).on("click",".jp-cp-empct",function(){r(),o.ajax({url:jp_cp_localize.adminurl,type:"POST",data:{action:"jp_cp_empty_cart"},success:function(o){o.fragments?i(o):console.log(o),s()}})})});